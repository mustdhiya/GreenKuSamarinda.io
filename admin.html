<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenKu Samarinda - Dashboard Admin</title>
    <meta name="description" content="Dashboard Admin GreenKu Samarinda - Digitalisasi Pengelolaan Sampah Smart City">
    <link rel="icon" type="image/x-icon" href="logo.png">
    
    <!-- Framework CSS dari unpkg.com -->
    <script src="https://unpkg.com/tailwindcss-cdn@3.4.0/tailwindcss.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Framework JS dari unpkg.com -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/chart.js@4.4.1/dist/chart.min.js"></script>
    <script src="https://unpkg.com/alpinejs@3.13.3/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-x: hidden;
            background-color: #f8fafc;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Layout Container */
        .layout-container {
            min-height: 100vh;
            max-width: 100vw;
            overflow: hidden;
        }
        
        /* Sidebar Optimizations */
        .sidebar {
            width: 16rem; /* 256px */
            min-width: 16rem;
            max-width: 16rem;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar-link {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .sidebar-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
            border-radius: 8px;
        }
        
        /* Main Content Optimizations */
        .main-content {
            flex: 1;
            min-width: 0; /* Prevents flex item from overflowing */
            overflow: hidden;
        }
        
        .content-area {
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* Stats Grid Responsive Optimization */
        .stats-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: 1fr;
        }
        
        @media (min-width: 640px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (min-width: 1280px) {
            .stats-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        /* Stat Card Optimizations */
        .stat-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .stat-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Map Container Optimizations */
        .map-container {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 16px;
            overflow: hidden;
            background-color: #f3f4f6;
        }
        
        #map {
            width: 100% !important;
            height: 100% !important;
            border-radius: 16px;
            z-index: 1;
        }
        
        /* Chart Optimizations */
        .sparkline-chart {
            height: 50px;
            width: 100%;
            max-width: 100%;
        }
        
        /* Responsive Text */
        .responsive-text {
            font-size: clamp(0.875rem, 2vw, 1rem);
        }
        
        .responsive-heading {
            font-size: clamp(1.25rem, 4vw, 1.5rem);
        }
        
        /* Dropdown Optimizations */
        .dropdown {
            position: relative;
        }
        
        .dropdown-menu {
            position: absolute;
            right: 0;
            top: 100%;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            min-width: 12rem;
            max-width: 16rem;
        }
        
        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        /* Table Container Optimizations */
        .table-container {
            overflow-y: auto;
            overflow-x: hidden;
            max-height: 300px;
            border-radius: 12px;
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f1f5f9;
        }
        
        .table-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        /* Loading States */
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                max-width: 16rem;
            }
            
            .map-container {
                height: 300px;
            }
            
            .stat-card {
                min-height: 160px;
            }
            
            .stat-card:hover {
                transform: translateY(-2px) scale(1.01);
            }
            
            .content-area {
                padding: 1rem;
            }
        }
        
        @media (max-width: 640px) {
            .map-container {
                height: 250px;
            }
            
            .stats-grid {
                gap: 1rem;
            }
            
            .stat-card {
                min-height: 140px;
                padding: 1rem;
            }
        }
        
        /* Custom Map Markers */
        .custom-div-icon {
            background: transparent !important;
            border: none !important;
            border-radius: 50%;
            width: 40px !important;
            height: 40px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .custom-div-icon i {
            font-size: 18px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            filter: drop-shadow(0 0 3px rgba(255,255,255,0.8));
        }
        
        /* Leaflet Fixes */
        .leaflet-control-container .leaflet-top,
        .leaflet-control-container .leaflet-bottom {
            z-index: 10 !important;
        }
        
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        /* Performance Optimizations */
        .gpu-accelerated {
            transform: translateZ(0);
            will-change: transform;
        }
        
        /* Utility Classes */
        .prevent-overflow {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .container-bounded {
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* Animation Optimizations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        /* Z-Index Management */
        .z-sidebar { z-index: 40; }
        .z-overlay { z-index: 39; }
        .z-header { z-index: 30; }
        .z-dropdown { z-index: 50; }
        .z-modal { z-index: 60; }
        .z-tooltip { z-index: 70; }
    </style>
</head>

<body class="bg-slate-50" x-data="{ mobileSidebarOpen: false, currentUser: 'Admin GreenKu' }">
    <div class="layout-container flex h-screen">
        <!-- Desktop Sidebar -->
        <aside class="sidebar bg-gradient-to-b from-emerald-700 to-emerald-800 text-white flex-col h-full hidden md:flex shadow-xl z-sidebar">
            <div class="p-6 flex items-center justify-center border-b border-emerald-600 flex-shrink-0">
                <img src="logo.png" alt="GreenKu Logo" class="w-10 h-10 mr-3 flex-shrink-0">
                <div class="min-w-0">
                    <h2 class="text-lg font-bold truncate">GreenKu</h2>
                    <p class="text-emerald-200 text-sm truncate">Samarinda</p>
                </div>
            </div>
            
            <nav class="flex-1 overflow-y-auto py-6">
                <div class="px-4 space-y-2">
                    <a href="#dashboard" class="sidebar-link flex items-center px-4 py-3 text-white rounded-xl bg-emerald-800 shadow-lg">
                        <i class="fas fa-tachometer-alt w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Dashboard</span>
                    </a>
                    <a href="#laporan" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-trash-alt w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Laporan Sampah</span>
                    </a>
                    <a href="#bank-sampah" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-recycle w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Bank Sampah</span>
                    </a>
                    <a href="#armada" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-truck w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Armada</span>
                    </a>
                    <a href="#pengguna" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-users w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Pengguna</span>
                    </a>
                    <a href="#reward" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-star w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Program Reward</span>
                    </a>
                    <a href="#analitik" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-chart-bar w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Laporan & Analitik</span>
                    </a>
                    <a href="#pengaturan" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl hover:bg-emerald-800">
                        <i class="fas fa-cog w-5 text-lg flex-shrink-0"></i>
                        <span class="ml-3 font-medium truncate">Pengaturan</span>
                    </a>
                </div>
            </nav>
            
            <div class="p-4 border-t border-emerald-600 flex-shrink-0">
                <div class="flex items-center min-w-0">
                    <div class="flex-shrink-0">
                        <div class="h-10 w-10 rounded-full bg-emerald-600 flex items-center justify-center">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-3 min-w-0">
                        <p class="text-sm font-medium text-white truncate" x-text="currentUser"></p>
                        <p class="text-xs text-emerald-200 truncate">admin@greenku.id</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Mobile Sidebar -->
        <div x-show="mobileSidebarOpen" 
             x-transition:enter="transform transition ease-in-out duration-300"
             x-transition:enter-start="-translate-x-full"
             x-transition:enter-end="translate-x-0"
             x-transition:leave="transform transition ease-in-out duration-300"
             x-transition:leave-start="translate-x-0"
             x-transition:leave-end="-translate-x-full"
             class="fixed inset-y-0 left-0 z-sidebar w-64 bg-gradient-to-b from-emerald-700 to-emerald-800 text-white md:hidden">
            
            <div class="p-4 flex items-center justify-between border-b border-emerald-600">
                <div class="flex items-center min-w-0">
                    <img src="logo.png" alt="GreenKu Logo" class="w-8 h-8 mr-2 flex-shrink-0">
                    <h2 class="text-lg font-bold truncate">GreenKu Samarinda</h2>
                </div>
                <button @click="mobileSidebarOpen = false" class="text-white hover:text-emerald-200 flex-shrink-0">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <nav class="flex-1 overflow-y-auto py-4">
                <div class="px-4 space-y-2">
                    <a href="#dashboard" class="sidebar-link flex items-center px-4 py-3 text-white rounded-xl bg-emerald-800">
                        <i class="fas fa-tachometer-alt w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Dashboard</span>
                    </a>
                    <a href="#laporan" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-trash-alt w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Laporan Sampah</span>
                    </a>
                    <a href="#bank-sampah" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-recycle w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Bank Sampah</span>
                    </a>
                    <a href="#armada" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-truck w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Armada</span>
                    </a>
                    <a href="#pengguna" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-users w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Pengguna</span>
                    </a>
                    <a href="#reward" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-star w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Program Reward</span>
                    </a>
                    <a href="#analitik" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-chart-bar w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Laporan & Analitik</span>
                    </a>
                    <a href="#pengaturan" class="sidebar-link flex items-center px-4 py-3 text-emerald-100 rounded-xl">
                        <i class="fas fa-cog w-5 flex-shrink-0"></i>
                        <span class="ml-3 truncate">Pengaturan</span>
                    </a>
                </div>
            </nav>
        </div>

        <!-- Mobile Overlay -->
        <div x-show="mobileSidebarOpen" 
             x-transition:enter="transition-opacity ease-linear duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition-opacity ease-linear duration-300"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             @click="mobileSidebarOpen = false"
             class="fixed inset-0 bg-gray-600 bg-opacity-75 z-overlay md:hidden"></div>

        <!-- Main Content -->
        <div class="main-content flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-gradient-to-r from-emerald-800 via-emerald-600 to-emerald-500 shadow-xl z-header flex-shrink-0">
                <div class="flex items-center justify-between p-4">
                    <div class="flex items-center min-w-0">
                        <button @click="mobileSidebarOpen = true" class="mr-4 text-white md:hidden hover:text-emerald-200 transition-colors flex-shrink-0">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <img src="logo.png" alt="GreenKu Logo" class="w-8 h-8 mr-3 flex-shrink-0">
                        <div class="min-w-0">
                            <h1 class="responsive-heading font-bold text-white truncate">GreenKu Samarinda</h1>
                            <p class="text-emerald-100 text-sm hidden sm:block truncate">Dashboard Admin Smart City</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-2 sm:space-x-4 flex-shrink-0">
                        <!-- Real-time Clock -->
                        <div class="hidden lg:block text-white text-sm">
                            <div id="currentTime" class="font-medium prevent-overflow"></div>
                        </div>
                        
                        <!-- Notifications -->
                        <button class="text-white relative hover:text-emerald-200 transition-colors p-2">
                            <i class="fas fa-bell text-lg"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                        </button>
                        
                        <!-- User Dropdown -->
                        <div class="dropdown">
                            <button class="flex items-center text-white focus:outline-none hover:text-emerald-200 transition-colors p-2">
                                <div class="h-8 w-8 rounded-full bg-emerald-600 flex items-center justify-center mr-2">
                                    <i class="fas fa-user text-sm"></i>
                                </div>
                                <span class="hidden sm:inline font-medium truncate">Admin</span>
                                <i class="fas fa-chevron-down ml-2 text-xs"></i>
                            </button>
                            <div class="dropdown-menu bg-white rounded-xl shadow-xl py-2 border z-dropdown">
                                <a href="#profil" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50 transition-colors">
                                    <i class="fas fa-user mr-2"></i>Profil
                                </a>
                                <a href="#pengaturan" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50 transition-colors">
                                    <i class="fas fa-cog mr-2"></i>Pengaturan
                                </a>
                                <div class="border-t border-gray-100 my-1"></div>
                                <a href="#logout" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                                    <i class="fas fa-sign-out-alt mr-2"></i>Keluar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="flex-1 overflow-y-auto content-area container-bounded">
                <div class="p-4 lg:p-6">
                    <!-- Welcome Section -->
                    <div class="mb-6 lg:mb-8" data-aos="fade-up">
                        <h2 class="text-2xl lg:text-3xl font-bold text-gray-800 mb-2">Dashboard Overview</h2>
                        <p class="text-gray-600 responsive-text">Selamat datang kembali, Admin! Berikut adalah statistik terkini sistem GreenKu Samarinda.</p>
                        <div class="mt-4 text-sm text-gray-500">
                            <span>Terakhir diperbarui: </span>
                            <span id="lastUpdated" class="font-medium"></span>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid mb-6 lg:mb-8">
                        <!-- Total Laporan Sampah -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-orange-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="100">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Total Laporan Sampah</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="1247">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-green-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-up mr-1"></i>12%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-orange-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-trash-alt text-orange-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart1"></canvas>
                            </div>
                        </div>

                        <!-- Permintaan Aktif -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-blue-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="200">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Permintaan Aktif</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="32">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-green-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-up mr-1"></i>8%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-blue-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-truck text-blue-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart2"></canvas>
                            </div>
                        </div>

                        <!-- Bank Sampah Terdaftar -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-green-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="300">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Bank Sampah Terdaftar</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="18">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-green-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-up mr-1"></i>5%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-green-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-recycle text-green-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart3"></canvas>
                            </div>
                        </div>

                        <!-- Pengguna Aktif -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-purple-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="400">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Pengguna Aktif</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="3542">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-green-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-up mr-1"></i>15%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-purple-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-users text-purple-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart4"></canvas>
                            </div>
                        </div>

                        <!-- Armada Tersedia -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-indigo-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="500">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Armada Tersedia</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="12">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-red-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-down mr-1"></i>3%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-indigo-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-map-pin text-indigo-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart5"></canvas>
                            </div>
                        </div>

                        <!-- Total Poin Reward -->
                        <div class="stat-card bg-white rounded-2xl shadow-lg p-4 lg:p-6 border-l-4 border-yellow-500 gpu-accelerated" data-aos="fade-up" data-aos-delay="600">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-500 mb-1 truncate">Total Poin Reward</p>
                                    <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 counter" data-target="28450">0</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-green-500 text-sm flex items-center font-medium">
                                            <i class="fas fa-arrow-up mr-1"></i>10%
                                        </span>
                                        <span class="text-xs text-gray-500 ml-2 truncate">vs minggu lalu</span>
                                    </div>
                                </div>
                                <div class="bg-yellow-100 p-2 lg:p-3 rounded-xl flex-shrink-0">
                                    <i class="fas fa-star text-yellow-500 text-xl lg:text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas class="sparkline-chart" id="chart6"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content Grid -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
                        <!-- Map Column -->
                        <div class="lg:col-span-2" data-aos="fade-right">
                            <div class="bg-white rounded-2xl shadow-xl p-4 lg:p-6">
                                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                                    <div class="mb-4 sm:mb-0">
                                        <h3 class="responsive-heading font-bold text-gray-800 mb-2">Peta Monitoring Real-Time Samarinda</h3>
                                        <p class="text-gray-600 responsive-text">Pemantauan lokasi sampah dan armada secara langsung</p>
                                    </div>
                                    <div class="flex space-x-2 flex-shrink-0">
                                        <button class="px-3 py-2 bg-emerald-100 text-emerald-700 rounded-xl text-sm font-medium hover:bg-emerald-200 transition-all">
                                            <i class="fas fa-filter mr-1"></i> Filter
                                        </button>
                                        <button class="px-3 py-2 bg-emerald-600 text-white rounded-xl text-sm font-medium hover:bg-emerald-700 transition-all">
                                            <i class="fas fa-sync-alt mr-1"></i> Refresh
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Map Legend -->
                                <div class="flex flex-wrap gap-3 lg:gap-4 mb-6 p-4 bg-gray-50 rounded-xl">
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 lg:w-4 lg:h-4 rounded-full bg-red-500 mr-2 shadow-sm flex-shrink-0"></span>
                                        <span class="text-sm text-gray-700 font-medium">Menunggu</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 lg:w-4 lg:h-4 rounded-full bg-yellow-500 mr-2 shadow-sm flex-shrink-0"></span>
                                        <span class="text-sm text-gray-700 font-medium">Diproses</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 lg:w-4 lg:h-4 rounded-full bg-green-500 mr-2 shadow-sm flex-shrink-0"></span>
                                        <span class="text-sm text-gray-700 font-medium">Selesai</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 lg:w-4 lg:h-4 rounded-full bg-blue-500 mr-2 shadow-sm flex-shrink-0"></span>
                                        <span class="text-sm text-gray-700 font-medium">Bank Sampah</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 lg:w-4 lg:h-4 rounded-full bg-purple-500 mr-2 shadow-sm flex-shrink-0"></span>
                                        <span class="text-sm text-gray-700 font-medium">Armada</span>
                                    </div>
                                </div>
                                
                                <!-- Map Container -->
                                <div class="map-container gpu-accelerated">
                                    <div id="map"></div>
                                </div>
                                
                                <!-- Map Controls -->
                                <div class="flex flex-wrap justify-between mt-6 gap-2">
                                    <div class="flex space-x-2">
                                        <button class="px-3 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-all">
                                            <i class="fas fa-layer-group mr-1"></i> <span class="hidden sm:inline">Layers</span>
                                        </button>
                                        <button class="px-3 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-all">
                                            <i class="fas fa-map-marker-alt mr-1"></i> <span class="hidden sm:inline">Lokasi Saya</span>
                                        </button>
                                    </div>
                                    <div>
                                        <button class="px-3 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-all">
                                            <i class="fas fa-expand-alt mr-1"></i> <span class="hidden sm:inline">Fullscreen</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="lg:col-span-1 space-y-6" data-aos="fade-left">
                            <!-- Recent Reports -->
                            <div class="bg-white rounded-2xl shadow-xl p-4 lg:p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-bold text-gray-800">Laporan Terbaru</h3>
                                    <a href="#laporan" class="text-emerald-600 text-sm hover:underline font-medium flex-shrink-0">Lihat Semua</a>
                                </div>
                                <div class="table-container">
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                                            <div class="flex items-center min-w-0">
                                                <div class="w-3 h-3 rounded-full bg-red-500 mr-3 flex-shrink-0"></div>
                                                <div class="min-w-0">
                                                    <p class="text-sm font-medium text-gray-800 truncate">#1245 - Jl. Pramuka</p>
                                                    <p class="text-xs text-gray-500">5 menit lalu</p>
                                                </div>
                                            </div>
                                            <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 font-medium flex-shrink-0">Menunggu</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                                            <div class="flex items-center min-w-0">
                                                <div class="w-3 h-3 rounded-full bg-yellow-500 mr-3 flex-shrink-0"></div>
                                                <div class="min-w-0">
                                                    <p class="text-sm font-medium text-gray-800 truncate">#1244 - Jl. Juanda</p>
                                                    <p class="text-xs text-gray-500">20 menit lalu</p>
                                                </div>
                                            </div>
                                            <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 font-medium flex-shrink-0">Diproses</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                                            <div class="flex items-center min-w-0">
                                                <div class="w-3 h-3 rounded-full bg-green-500 mr-3 flex-shrink-0"></div>
                                                <div class="min-w-0">
                                                    <p class="text-sm font-medium text-gray-800 truncate">#1243 - Jl. Gajah Mada</p>
                                                    <p class="text-xs text-gray-500">1 jam lalu</p>
                                                </div>
                                            </div>
                                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium flex-shrink-0">Selesai</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                                            <div class="flex items-center min-w-0">
                                                <div class="w-3 h-3 rounded-full bg-green-500 mr-3 flex-shrink-0"></div>
                                                <div class="min-w-0">
                                                    <p class="text-sm font-medium text-gray-800 truncate">#1242 - Jl. Pahlawan</p>
                                                    <p class="text-xs text-gray-500">2 jam lalu</p>
                                                </div>
                                            </div>
                                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium flex-shrink-0">Selesai</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Armada Status -->
                            <div class="bg-white rounded-2xl shadow-xl p-4 lg:p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-bold text-gray-800">Status Armada</h3>
                                    <a href="#armada" class="text-emerald-600 text-sm hover:underline font-medium flex-shrink-0">Detail</a>
                                </div>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-xl">
                                        <div class="flex items-center min-w-0">
                                            <div class="w-8 h-8 lg:w-10 lg:h-10 bg-green-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                                                <i class="fas fa-truck text-green-600"></i>
                                            </div>
                                            <div class="min-w-0">
                                                <p class="text-sm font-medium text-gray-800 truncate">Truck-01</p>
                                                <p class="text-xs text-gray-500 truncate">Jl. Pramuka</p>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium flex-shrink-0">Aktif</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-xl">
                                        <div class="flex items-center min-w-0">
                                            <div class="w-8 h-8 lg:w-10 lg:h-10 bg-green-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                                                <i class="fas fa-truck text-green-600"></i>
                                            </div>
                                            <div class="min-w-0">
                                                <p class="text-sm font-medium text-gray-800 truncate">Truck-02</p>
                                                <p class="text-xs text-gray-500 truncate">Jl. Juanda</p>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium flex-shrink-0">Aktif</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                        <div class="flex items-center min-w-0">
                                            <div class="w-8 h-8 lg:w-10 lg:h-10 bg-gray-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                                                <i class="fas fa-truck text-gray-600"></i>
                                            </div>
                                            <div class="min-w-0">
                                                <p class="text-sm font-medium text-gray-800 truncate">Truck-03</p>
                                                <p class="text-xs text-gray-500 truncate">Depot</p>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 font-medium flex-shrink-0">Istirahat</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-red-50 rounded-xl">
                                        <div class="flex items-center min-w-0">
                                            <div class="w-8 h-8 lg:w-10 lg:h-10 bg-red-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                                                <i class="fas fa-truck text-red-600"></i>
                                            </div>
                                            <div class="min-w-0">
                                                <p class="text-sm font-medium text-gray-800 truncate">Truck-05</p>
                                                <p class="text-xs text-gray-500 truncate">Bengkel</p>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 font-medium flex-shrink-0">Perbaikan</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="bg-white rounded-2xl shadow-xl p-4 lg:p-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-6">Aksi Cepat</h3>
                                <div class="grid grid-cols-2 gap-3 lg:gap-4">
                                    <button class="flex flex-col items-center justify-center p-3 lg:p-4 bg-emerald-50 rounded-xl hover:bg-emerald-100 transition-all gpu-accelerated">
                                        <i class="fas fa-plus-circle text-emerald-600 text-xl lg:text-2xl mb-2"></i>
                                        <span class="text-sm text-gray-800 font-medium text-center">Tambah Laporan</span>
                                    </button>
                                    <button class="flex flex-col items-center justify-center p-3 lg:p-4 bg-blue-50 rounded-xl hover:bg-blue-100 transition-all gpu-accelerated">
                                        <i class="fas fa-truck text-blue-600 text-xl lg:text-2xl mb-2"></i>
                                        <span class="text-sm text-gray-800 font-medium text-center">Atur Armada</span>
                                    </button>
                                    <button class="flex flex-col items-center justify-center p-3 lg:p-4 bg-purple-50 rounded-xl hover:bg-purple-100 transition-all gpu-accelerated">
                                        <i class="fas fa-user-plus text-purple-600 text-xl lg:text-2xl mb-2"></i>
                                        <span class="text-sm text-gray-800 font-medium text-center">Tambah Pengguna</span>
                                    </button>
                                    <button class="flex flex-col items-center justify-center p-3 lg:p-4 bg-orange-50 rounded-xl hover:bg-orange-100 transition-all gpu-accelerated">
                                        <i class="fas fa-chart-line text-orange-600 text-xl lg:text-2xl mb-2"></i>
                                        <span class="text-sm text-gray-800 font-medium text-center">Lihat Laporan</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Initialize AOS with optimized settings
        AOS.init({
            duration: 600,
            easing: 'ease-out-cubic',
            once: true,
            mirror: false,
            offset: 50
        });

        // Performance optimized time update
        let timeUpdateInterval;
        function updateTime() {
            const now = new Date();
            const currentTimeEl = document.getElementById('currentTime');
            const lastUpdatedEl = document.getElementById('lastUpdated');
            
            if (currentTimeEl) {
                const timeString = now.toLocaleString('id-ID', {
                    weekday: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                currentTimeEl.textContent = timeString;
            }
            
            if (lastUpdatedEl) {
                const lastUpdatedString = now.toLocaleString('id-ID', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                lastUpdatedEl.textContent = lastUpdatedString;
            }
        }

        // Optimized counter animation with requestAnimationFrame
        function animateCounter(element) {
            const target = parseInt(element.getAttribute('data-target'));
            const duration = 2000;
            const startTime = performance.now();
            
            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.floor(target * easeOutQuart);
                
                element.textContent = current.toLocaleString('id-ID');
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }
            
            requestAnimationFrame(updateCounter);
        }

        // Optimized sparkline chart creation
        function createSparkline(canvasId, data, color) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return null;
            
            try {
                const ctx = canvas.getContext('2d');
                
                return new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array(data.length).fill(''),
                        datasets: [{
                            data: data,
                            borderColor: color,
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: true,
                            backgroundColor: color + '20',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: { enabled: false }
                        },
                        scales: {
                            x: { display: false },
                            y: { 
                                display: false,
                                min: Math.min(...data) * 0.8,
                                max: Math.max(...data) * 1.2
                            }
                        },
                        animation: {
                            duration: 1500,
                            easing: 'easeOutQuart'
                        }
                    }
                });
            } catch (error) {
                console.warn('Failed to create chart for', canvasId, error);
                return null;
            }
        }

        // Optimized map initialization with error handling
        function initMap() {
            const mapElement = document.getElementById('map');
            if (!mapElement) return;
            
            try {
                // Samarinda coordinates
                const samarindaCenter = [-0.5017, 117.1536];
                const map = L.map('map', {
                    zoomControl: true,
                    attributionControl: false,
                    preferCanvas: true // Performance optimization
                }).setView(samarindaCenter, 12);
                
                // Add tile layer with error handling
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: ' OpenStreetMap contributors',
                    errorTileUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgZmlsbD0iI2Y5ZmJmZiIvPjx0ZXh0IHg9IjEyOCIgeT0iMTI4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iMC4zZW0iIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNmI3Mjc5Ij5NYXAgVGlsZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4='
                }).addTo(map);
                
                // Custom marker creation function
                const createIcon = (color, icon) => L.divIcon({
                    html: `<i class="fas fa-${icon}" style="color: ${color}; font-size: 18px;"></i>`,
                    className: 'custom-div-icon',
                    iconSize: [40, 40],
                    iconAnchor: [20, 20]
                });
                
                // Marker types
                const markerIcons = {
                    waiting: createIcon('#ef4444', 'trash-alt'),
                    processing: createIcon('#f59e0b', 'trash-alt'),
                    completed: createIcon('#10b981', 'trash-alt'),
                    bank: createIcon('#3b82f6', 'recycle'),
                    truck: createIcon('#8b5cf6', 'truck')
                };
                
                // Sample markers with proper Samarinda coordinates
                const markers = [
                    { pos: [-0.495, 117.145], icon: markerIcons.waiting, popup: "<b>Laporan #1245</b><br>Jl. Pramuka<br>Status: Menunggu" },
                    { pos: [-0.505, 117.155], icon: markerIcons.processing, popup: "<b>Laporan #1244</b><br>Jl. Juanda<br>Status: Diproses" },
                    { pos: [-0.51, 117.14], icon: markerIcons.completed, popup: "<b>Laporan #1243</b><br>Jl. Gajah Mada<br>Status: Selesai" },
                    { pos: [-0.49, 117.16], icon: markerIcons.bank, popup: "<b>Bank Sampah Sejahtera</b><br>Jl. Pahlawan<br>Kapasitas: 70%" },
                    { pos: [-0.515, 117.17], icon: markerIcons.bank, popup: "<b>Bank Sampah Mandiri</b><br>Jl. Diponegoro<br>Kapasitas: 45%" },
                    { pos: [-0.5, 117.15], icon: markerIcons.truck, popup: "<b>Truck-01</b><br>Status: Aktif<br>Driver: Budi" },
                    { pos: [-0.505, 117.16], icon: markerIcons.truck, popup: "<b>Truck-02</b><br>Status: Aktif<br>Driver: Andi" }
                ];
                
                // Add markers to map
                markers.forEach(marker => {
                    L.marker(marker.pos, { icon: marker.icon })
                        .addTo(map)
                        .bindPopup(marker.popup);
                });
                
                // Animated moving truck (performance optimized)
                let movingTruck = L.marker([-0.5, 117.14], { icon: markerIcons.truck }).addTo(map);
                movingTruck.bindPopup("<b>Truck-01</b><br>Status: Bergerak<br>Driver: Budi");
                
                let lat = -0.5, lng = 117.14, direction = 1;
                const truckInterval = setInterval(() => {
                    lng += 0.001 * direction;
                    if (lng > 117.17) direction = -1;
                    if (lng < 117.13) direction = 1;
                    movingTruck.setLatLng([lat, lng]);
                }, 3000); // Reduced frequency for better performance
                
                // Optimize map rendering
                setTimeout(() => {
                    map.invalidateSize();
                }, 300);
                
                // Cleanup interval on page unload
                window.addEventListener('beforeunload', () => clearInterval(truckInterval));
                
                // Store map reference globally for potential future use
                window.greenKuMap = map;
                
            } catch (error) {
                console.error("Map initialization error:", error);
                mapElement.innerHTML = `
                    <div class="flex items-center justify-center h-full bg-gray-100 rounded-2xl">
                        <div class="text-center p-6">
                            <i class="fas fa-map-marked-alt text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-500 text-sm">Peta tidak dapat dimuat</p>
                            <button onclick="initMap()" class="mt-3 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm hover:bg-emerald-700 transition">
                                Coba Lagi
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        // Optimized DOM Content Loaded with performance monitoring
        document.addEventListener('DOMContentLoaded', function() {
            const startTime = performance.now();
            
            // Initialize time updates
            updateTime();
            timeUpdateInterval = setInterval(updateTime, 60000); // Update every minute instead of every second
            
            // Initialize counters with delay for better UX
            setTimeout(() => {
                document.querySelectorAll('.counter').forEach(animateCounter);
            }, 500);
            
            // Initialize sparkline charts with staggered delays
            const chartData = [
                { id: 'chart1', data: [12, 19, 15, 17, 14, 13, 16, 18, 20, 15, 17, 19], color: '#f97316' },
                { id: 'chart2', data: [5, 7, 8, 6, 5, 6, 7, 8, 7, 6, 7, 8], color: '#3b82f6' },
                { id: 'chart3', data: [10, 11, 12, 13, 14, 15, 15, 16, 17, 18, 17, 18], color: '#22c55e' },
                { id: 'chart4', data: [250, 300, 280, 320, 350, 370, 390, 400, 420, 450, 470, 500], color: '#8b5cf6' },
                { id: 'chart5', data: [15, 14, 13, 14, 15, 14, 13, 12, 13, 12, 11, 12], color: '#6366f1' },
                { id: 'chart6', data: [1800, 2000, 2200, 2100, 2300, 2400, 2350, 2450, 2500, 2600, 2700, 2800], color: '#eab308' }
            ];
            
            chartData.forEach((chart, index) => {
                setTimeout(() => {
                    createSparkline(chart.id, chart.data, chart.color);
                }, 1000 + (index * 100));
            });
            
            // Initialize map with delay
            setTimeout(initMap, 1500);
            
            // Performance monitoring
            const endTime = performance.now();
            console.log(`GreenKu Dashboard initialized in ${endTime - startTime}ms`);
            
            // Cleanup on page unload
            window.addEventListener('beforeunload', () => {
                if (timeUpdateInterval) clearInterval(timeUpdateInterval);
            });
        });

        // Global error handler for better debugging
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });

        // Make initialization functions available globally for manual retry
        window.initMap = initMap;
        window.updateTime = updateTime;
    </script>
</body>
</html>
